(function(){"use strict";var e={2339:function(e,o,t){t.d(o,{db:function(){return s},j:function(){return d}});var n=t(6400),a=t(7617),r=t(2992);const i={apiKey:"AIzaSyAOFIm-Ba3rBmEQVASwTBGNmwCu1SRnhgk",authDomain:"bonosapp-86a1c.firebaseapp.com",projectId:"bonosapp-86a1c",storageBucket:"bonosapp-86a1c.firebasestorage.app",messagingSenderId:"26936508307",appId:"1:26936508307:web:560d44bb0fda7c91cbb266",measurementId:"G-5XJPFYLNSC"},l=(0,n.Wp)(i),s=(0,a.aU)(l),d=(0,r.xI)(l)},6050:function(e,o,t){var n=t(5130),a=t(6768);function r(e,o){const t=(0,a.g2)("router-link"),n=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("nav",null,[(0,a.bF)(t,{to:"/bonolist"},{default:(0,a.k6)((()=>o[0]||(o[0]=[(0,a.eW)("Lista")]))),_:1}),o[4]||(o[4]=(0,a.eW)(" | ")),(0,a.bF)(t,{to:"/editbono"},{default:(0,a.k6)((()=>o[1]||(o[1]=[(0,a.eW)("Crear Bono")]))),_:1}),o[5]||(o[5]=(0,a.eW)(" | ")),(0,a.bF)(t,{to:"/register"},{default:(0,a.k6)((()=>o[2]||(o[2]=[(0,a.eW)("Register")]))),_:1}),o[6]||(o[6]=(0,a.eW)(" | ")),(0,a.bF)(t,{to:"/sign-in"},{default:(0,a.k6)((()=>o[3]||(o[3]=[(0,a.eW)("Login")]))),_:1})]),(0,a.bF)(n)],64)}var i=t(1241);const l={},s=(0,i.A)(l,[["render",r]]);var d=s,c=t(1387),u=t(4232);const b={class:"add-bono-container"},m={class:"container"},p=["onClick"],f={class:"row g-0"},v={class:"card-body"},h={class:"card-title"},k={style:{display:"flex","justify-content":"space-between","align-items":"center"}},g=["onUpdate:modelValue"],y={class:"card-text"},L={class:"card-text"},C={class:"card-text"},B={class:"modal-content"};function E(e,o,t,r,i,l){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",b,[(0,a.Lk)("button",{class:"add-bono-button",onClick:o[0]||(o[0]=(...e)=>l.redirigirAEditBono&&l.redirigirAEditBono(...e))},o[5]||(o[5]=[(0,a.Lk)("i",{class:"fa-solid fa-plus"},null,-1)]))]),(0,a.Lk)("div",m,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.bonos,(e=>((0,a.uX)(),(0,a.CE)("div",{class:(0,u.C4)(["card mb-3",{"card-active":e.active,"card-inactive":!e.active}]),style:{"max-width":"540px"},key:e.id,onClick:o=>l.mostrarModal(e)},[(0,a.Lk)("div",f,[(0,a.Lk)("div",v,[(0,a.Lk)("h5",h,(0,u.v_)(e.name),1),(0,a.Lk)("p",k,[o[6]||(o[6]=(0,a.eW)(" Activo ")),(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":o=>e.active=o,disabled:""},null,8,g),[[n.lH,e.active]])]),(0,a.Lk)("p",y,[(0,a.Lk)("small",{class:(0,u.C4)({"text-muted":e.active})}," Desde: "+(0,u.v_)(l.formatDate(e.available_from)),3)]),(0,a.Lk)("p",L,[(0,a.Lk)("small",{class:(0,u.C4)({"text-muted":e.active})}," Hasta: "+(0,u.v_)(l.formatDate(e.available_to)),3)]),(0,a.Lk)("p",C,[(0,a.Lk)("small",{class:(0,u.C4)({"text-muted":e.active})},"Precio: "+(0,u.v_)(e.amount)+" "+(0,u.v_)(e.currency),3)])])])],10,p)))),128)),i.mostrarModalBono?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"modal",onClick:o[4]||(o[4]=(0,n.D$)(((...e)=>l.cerrarModal&&l.cerrarModal(...e)),["self"]))},[(0,a.Lk)("div",B,[(0,a.Lk)("button",{class:"btn btn-secondary",onClick:o[1]||(o[1]=e=>l.verBono(i.bonoSeleccionado))},"Ver"),(0,a.Lk)("button",{class:"btn btn-info",onClick:o[2]||(o[2]=e=>l.editarBono(i.bonoSeleccionado))},"Editar"),(0,a.Lk)("button",{class:"btn btn-danger",onClick:o[3]||(o[3]=e=>l.borrarBono(i.bonoSeleccionado.id))},"Borrar")])])):(0,a.Q3)("",!0)])],64)}t(4114),t(8111),t(1701);var _=t(7617),x=t(2339),S={data(){return{bonos:[],mostrarModalBono:!1,bonoSeleccionado:null}},mounted(){const e=(0,_.rJ)(x.db,"bonos");(0,_.aQ)(e,(e=>{this.bonos=e.docs.map((e=>({id:e.id,...e.data()})))}))},created(){this.bonos=this.bonos.map((e=>({...e,active:!0===e.active}))).sort(((e,o)=>o.active-e.active))},methods:{formatDate(e){const o=new Date(e);if(isNaN(o.getTime()))return"-";const t=o.getDate(),n=o.toLocaleString("es-ES",{month:"short"}),a=o.getFullYear().toString().slice(-2);return`${t}-${n}-${a}`},mostrarModal(e){this.bonoSeleccionado=e,this.mostrarModalBono=!0},cerrarModal(){this.mostrarModalBono=!1,this.bonoSeleccionado=null},verBono(e){this.$router.push({path:"/editbono",query:{bono:JSON.stringify(e),ver:!0}}),this.cerrarModal()},editarBono(e){console.log(JSON.stringify(e)),this.$router.push({path:"/editbono",query:{bono:JSON.stringify(e)}}),this.cerrarModal()},async borrarBono(e){try{await(0,_.kd)((0,_.H9)(x.db,"bonos",e)),console.log("Bono borrado con éxito"),this.cerrarModal()}catch(o){console.error("Error al borrar el bono: ",o)}},redirigirAEditBono(){this.$router.push("/editbono")}}};const w=(0,i.A)(S,[["render",E]]);var D=w;const N={class:"form"},O={class:"centered-title"},U={class:"mb-3"},A=["disabled"],z={class:"mb-3"},V=["disabled"],j={class:"mb-3"},I={class:"input-group"},M=["disabled"],F={class:"mb-3"},H={class:"input-group mb-3"},J=["disabled"],P=["disabled"],T={class:"mb-3"},q=["disabled"],W={class:"mb-3"},X=["disabled"],$={class:"form-check"},G=["disabled"],K={class:"form-check"},R=["disabled"],Q={class:"d-grid mt-4"};function Y(e,o,t,r,i,l){return(0,a.uX)(),(0,a.CE)("div",N,[(0,a.Lk)("h1",O,(0,u.v_)(i.bonoId&&!r.ver?"Editar Bono":i.bonoId&&r.ver?"Ver Bono":"Crear Bono"),1),(0,a.Lk)("div",U,[o[12]||(o[12]=(0,a.Lk)("label",{for:"nombreBono",class:"form-label"},"Nombre",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control",id:"nombreBono","onUpdate:modelValue":o[0]||(o[0]=e=>i.nombre=e),disabled:r.ver,required:""},null,8,A),[[n.Jo,i.nombre]])]),(0,a.Lk)("div",z,[o[13]||(o[13]=(0,a.Lk)("label",{for:"descripcionBono",class:"form-label"},"Descripción",-1)),(0,a.bo)((0,a.Lk)("textarea",{class:"form-control",id:"descripcionBono",rows:"3","onUpdate:modelValue":o[1]||(o[1]=e=>i.descripcion=e),disabled:r.ver},null,8,V),[[n.Jo,i.descripcion]])]),(0,a.Lk)("div",j,[o[15]||(o[15]=(0,a.Lk)("label",{for:"importeBono",class:"form-label"},"Importe",-1)),(0,a.Lk)("div",I,[(0,a.bo)((0,a.Lk)("input",{type:"number",class:"form-control",id:"importeBono",placeholder:"0",min:"0",inputmode:"numeric","onUpdate:modelValue":o[2]||(o[2]=e=>i.importe=e),"aria-label":"Importe"},null,512),[[n.Jo,i.importe]]),(0,a.bo)((0,a.Lk)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":o[3]||(o[3]=e=>i.moneda=e),disabled:r.ver},o[14]||(o[14]=[(0,a.Lk)("option",{value:"EUR",selected:""},"EUR",-1),(0,a.Lk)("option",{value:"GBP"},"GBP",-1),(0,a.Lk)("option",{value:"USD"},"USD",-1)]),8,M),[[n.u1,i.moneda]])])]),(0,a.Lk)("div",F,[o[17]||(o[17]=(0,a.Lk)("label",{for:"Caducidad",class:"form-label"},"Caducidad",-1)),(0,a.Lk)("div",H,[(0,a.bo)((0,a.Lk)("input",{type:"number",id:"numero",class:"form-control me-5",placeholder:"1","aria-label":"Username",min:"0",inputmode:"numeric","onUpdate:modelValue":o[4]||(o[4]=e=>i.caducidadNumero=e),disabled:r.ver},null,8,J),[[n.Jo,i.caducidadNumero]]),(0,a.bo)((0,a.Lk)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":o[5]||(o[5]=e=>i.caducidadUnidad=e),disabled:r.ver},o[16]||(o[16]=[(0,a.Lk)("option",{value:"días"},"Día/s",-1),(0,a.Lk)("option",{value:"semanas"},"Semana/s",-1),(0,a.Lk)("option",{value:"meses"},"Mes/es",-1),(0,a.Lk)("option",{value:"años"},"Año/s",-1)]),8,P),[[n.u1,i.caducidadUnidad]])])]),(0,a.Lk)("div",T,[o[18]||(o[18]=(0,a.Lk)("label",{for:"validezDesde",class:"form-label",required:""},"Validez Desde",-1)),(0,a.bo)((0,a.Lk)("input",{type:"date",class:"form-control",id:"validezDesde","onUpdate:modelValue":o[6]||(o[6]=e=>i.validezDesde=e),disabled:r.ver,required:""},null,8,q),[[n.Jo,i.validezDesde]])]),(0,a.Lk)("div",W,[o[19]||(o[19]=(0,a.Lk)("label",{for:"validezHasta",class:"form-label"},"Validez Hasta",-1)),(0,a.bo)((0,a.Lk)("input",{type:"date",class:"form-control",id:"validezHasta","onUpdate:modelValue":o[7]||(o[7]=e=>i.validezHasta=e),disabled:r.ver},null,8,X),[[n.Jo,i.validezHasta]])]),(0,a.Lk)("div",$,[(0,a.bo)((0,a.Lk)("input",{class:"form-check-input",type:"checkbox",id:"nominalCheck","onUpdate:modelValue":o[8]||(o[8]=e=>i.nominal=e),disabled:r.ver},null,8,G),[[n.lH,i.nominal]]),o[20]||(o[20]=(0,a.Lk)("label",{class:"form-check-label",for:"nominalCheck"}," Nominal ",-1))]),(0,a.Lk)("div",K,[(0,a.bo)((0,a.Lk)("input",{class:"form-check-input",type:"checkbox",id:"activeCheck","onUpdate:modelValue":o[9]||(o[9]=e=>i.activo=e),disabled:r.ver},null,8,R),[[n.lH,i.activo]]),o[21]||(o[21]=(0,a.Lk)("label",{class:"form-check-label",for:"activeCheck"}," Activo ",-1))]),(0,a.Lk)("div",Q,[r.ver?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,type:"submit",class:"btn btn-primary btn-lg",onClick:o[10]||(o[10]=(...e)=>l.guardarBono&&l.guardarBono(...e))},"Guardar")),(0,a.Lk)("button",{type:"button",class:"btn btn-secondary btn-lg mt-2",onClick:o[11]||(o[11]=(...e)=>l.cancelarEdicion&&l.cancelarEdicion(...e))},(0,u.v_)(r.ver?"Cerrar":"Cancelar"),1)])])}var Z={props:{bono:{type:Object,default:null},route:{type:Object,default:null}},setup(e){const o=(0,c.rd)(),t=!!e.route.query.ver;return{router:o,ver:t}},data(){return{bonoId:this.bono?this.bono.id:null,nombre:this.bono?this.bono.name:"",descripcion:this.bono?this.bono.description:"",importe:this.bono?this.bono.amount:"",moneda:this.bono?this.bono.currency:"EUR",caducidadNumero:this.bono?this.bono.expiration_num:1,caducidadUnidad:this.bono?this.bono.expiration_units:"meses",validezDesde:this.bono?this.bono.available_from:"",validezHasta:this.bono?this.bono.available_to:"",nominal:!!this.bono&&this.bono.nominal,activo:!!this.bono&&this.bono.active}},methods:{async guardarBono(){if(this.nombre)if(this.validezDesde)try{this.bonoId?(await(0,_.mZ)((0,_.H9)(x.db,"bonos",this.bonoId),{name:this.nombre,description:this.descripcion,amount:this.importe,currency:this.moneda,expiration_num:this.caducidadNumero,expiration_units:this.caducidadUnidad,available_from:this.validezDesde,available_to:this.validezHasta,nominal:this.nominal,active:this.activo,last_update:(0,_.O5)()}),console.log("Bono actualizado con éxito!")):(await(0,_.gS)((0,_.rJ)(x.db,"bonos"),{name:this.nombre,description:this.descripcion,amount:this.importe,currency:this.moneda,expiration_num:this.caducidadNumero,expiration_units:this.caducidadUnidad,available_from:this.validezDesde,available_to:this.validezHasta,nominal:this.nominal,active:this.activo,creation_time:(0,_.O5)(),last_update:(0,_.O5)()}),console.log("Bono guardado con éxito!")),this.router.push("/bonolist")}catch(e){console.error("Error al guardar/actualizar el bono:",e)}else alert("El campo Validez Desde es obligatorio.");else alert("El campo Nombre es obligatorio.")},cancelarEdicion(){this.router.push("/bonolist")}}};const ee=(0,i.A)(Z,[["render",Y]]);var oe=ee;const te=[{path:"/about",name:"about",component:()=>t.e(594).then(t.bind(t,603))},{path:"/",name:"bonolist",component:D},{path:"/bonolist",name:"BonoList",component:D},{path:"/editbono",component:oe,props:e=>({bono:e.query.bono?JSON.parse(e.query.bono):null,route:e})},{path:"/register",component:()=>t.e(371).then(t.bind(t,6570))},{path:"/sign-in",component:()=>t.e(584).then(t.bind(t,5584))}],ne=(0,c.aE)({history:(0,c.LA)("/bonosapp/"),routes:te});var ae=ne,re=t(782),ie=(0,re.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,n.Ef)(d).use(ie).use(ae).mount("#app")}},o={};function t(n){var a=o[n];if(void 0!==a)return a.exports;var r=o[n]={exports:{}};return e[n].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(o,n,a,r){if(!n){var i=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],r=e[c][2];for(var l=!0,s=0;s<n.length;s++)(!1&r||i>=r)&&Object.keys(t.O).every((function(e){return t.O[e](n[s])}))?n.splice(s--,1):(l=!1,r<i&&(i=r));if(l){e.splice(c--,1);var d=a();void 0!==d&&(o=d)}}return o}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,a,r]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(o,n){return t.f[n](e,o),o}),[]))}}(),function(){t.u=function(e){return"js/"+(594===e?"about":e)+"."+{371:"781645ab",584:"0432a238",594:"14469159"}[e]+".js"}}(),function(){t.miniCssF=function(e){return"css/"+e+".a67d3e06.css"}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={},o="bonosappvue:";t.l=function(n,a,r,i){if(e[n])e[n].push(a);else{var l,s;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==o+r){l=u;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,t.nc&&l.setAttribute("nonce",t.nc),l.setAttribute("data-webpack",o+r),l.src=n),e[n]=[a];var b=function(o,t){l.onerror=l.onload=null,clearTimeout(m);var a=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((function(e){return e(t)})),o)return o(t)},m=setTimeout(b.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=b.bind(null,l.onerror),l.onload=b.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/bonosapp/"}(),function(){if("undefined"!==typeof document){var e=function(e,o,n,a,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",t.nc&&(i.nonce=t.nc);var l=function(t){if(i.onerror=i.onload=null,"load"===t.type)a();else{var n=t&&t.type,l=t&&t.target&&t.target.href||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+": "+l+")");s.name="ChunkLoadError",s.code="CSS_CHUNK_LOAD_FAILED",s.type=n,s.request=l,i.parentNode&&i.parentNode.removeChild(i),r(s)}};return i.onerror=i.onload=l,i.href=o,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i),i},o=function(e,o){for(var t=document.getElementsByTagName("link"),n=0;n<t.length;n++){var a=t[n],r=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(r===e||r===o))return a}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){a=i[n],r=a.getAttribute("data-href");if(r===e||r===o)return a}},n=function(n){return new Promise((function(a,r){var i=t.miniCssF(n),l=t.p+i;if(o(i,l))return a();e(n,l,null,a,r)}))},a={524:0};t.f.miniCss=function(e,o){var t={371:1};a[e]?o.push(a[e]):0!==a[e]&&t[e]&&o.push(a[e]=n(e).then((function(){a[e]=0}),(function(o){throw delete a[e],o})))}}}(),function(){var e={524:0};t.f.j=function(o,n){var a=t.o(e,o)?e[o]:void 0;if(0!==a)if(a)n.push(a[2]);else{var r=new Promise((function(t,n){a=e[o]=[t,n]}));n.push(a[2]=r);var i=t.p+t.u(o),l=new Error,s=function(n){if(t.o(e,o)&&(a=e[o],0!==a&&(e[o]=void 0),a)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;l.message="Loading chunk "+o+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,a[1](l)}};t.l(i,s,"chunk-"+o,o)}},t.O.j=function(o){return 0===e[o]};var o=function(o,n){var a,r,i=n[0],l=n[1],s=n[2],d=0;if(i.some((function(o){return 0!==e[o]}))){for(a in l)t.o(l,a)&&(t.m[a]=l[a]);if(s)var c=s(t)}for(o&&o(n);d<i.length;d++)r=i[d],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},n=self["webpackChunkbonosappvue"]=self["webpackChunkbonosappvue"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(6050)}));n=t.O(n)})();
//# sourceMappingURL=app.ff848fa4.js.map