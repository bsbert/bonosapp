(function(){"use strict";var o={8079:function(o,e,a){var t=a(5130),n=a(6768);function i(o,e){const a=(0,n.g2)("router-link"),t=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("nav",null,[(0,n.bF)(a,{to:"/bonolist"},{default:(0,n.k6)((()=>e[0]||(e[0]=[(0,n.eW)("Lista")]))),_:1}),e[2]||(e[2]=(0,n.eW)(" | ")),(0,n.bF)(a,{to:"/editbono"},{default:(0,n.k6)((()=>e[1]||(e[1]=[(0,n.eW)("Crear Bono")]))),_:1})]),(0,n.bF)(t)],64)}var r=a(1241);const l={},s=(0,r.A)(l,[["render",i]]);var c=s,d=a(1387),u=a(4232);const b={class:"add-bono-container"},m={class:"container"},p=["onClick"],v={class:"row g-0"},f={class:"card-body"},h={class:"card-title"},k={style:{display:"flex","justify-content":"space-between","align-items":"center"}},L=["onUpdate:modelValue"],y={class:"card-text"},g={class:"card-text"},B={class:"card-text"},C={class:"modal-content"};function E(o,e,a,i,r,l){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",b,[(0,n.Lk)("button",{class:"add-bono-button",onClick:e[0]||(e[0]=(...o)=>l.redirigirAEditBono&&l.redirigirAEditBono(...o))},e[5]||(e[5]=[(0,n.Lk)("i",{class:"fa-solid fa-plus"},null,-1)]))]),(0,n.Lk)("div",m,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.bonos,(o=>((0,n.uX)(),(0,n.CE)("div",{class:(0,u.C4)(["card mb-3",{"card-active":o.active,"card-inactive":!o.active}]),style:{"max-width":"540px"},key:o.id,onClick:e=>l.mostrarModal(o)},[(0,n.Lk)("div",v,[(0,n.Lk)("div",f,[(0,n.Lk)("h5",h,(0,u.v_)(o.name),1),(0,n.Lk)("p",k,[e[6]||(e[6]=(0,n.eW)(" Activo ")),(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":e=>o.active=e,disabled:""},null,8,L),[[t.lH,o.active]])]),(0,n.Lk)("p",y,[(0,n.Lk)("small",{class:(0,u.C4)({"text-muted":o.active})}," Desde: "+(0,u.v_)(l.formatDate(o.available_from)),3)]),(0,n.Lk)("p",g,[(0,n.Lk)("small",{class:(0,u.C4)({"text-muted":o.active})}," Hasta: "+(0,u.v_)(l.formatDate(o.available_to)),3)]),(0,n.Lk)("p",B,[(0,n.Lk)("small",{class:(0,u.C4)({"text-muted":o.active})},"Precio: "+(0,u.v_)(o.amount)+" "+(0,u.v_)(o.currency),3)])])])],10,p)))),128)),r.mostrarModalBono?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"modal",onClick:e[4]||(e[4]=(0,t.D$)(((...o)=>l.cerrarModal&&l.cerrarModal(...o)),["self"]))},[(0,n.Lk)("div",C,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[1]||(e[1]=o=>l.verBono(r.bonoSeleccionado))},"Ver"),(0,n.Lk)("button",{class:"btn btn-info",onClick:e[2]||(e[2]=o=>l.editarBono(r.bonoSeleccionado))},"Editar"),(0,n.Lk)("button",{class:"btn btn-danger",onClick:e[3]||(e[3]=o=>l.borrarBono(r.bonoSeleccionado.id))},"Borrar")])])):(0,n.Q3)("",!0)])],64)}a(4114),a(8111),a(1701);var x=a(7617),_=a(6400);const S={apiKey:"AIzaSyAOFIm-Ba3rBmEQVASwTBGNmwCu1SRnhgk",authDomain:"bonosapp-86a1c.firebaseapp.com",projectId:"bonosapp-86a1c",storageBucket:"bonosapp-86a1c.firebasestorage.app",messagingSenderId:"26936508307",appId:"1:26936508307:web:560d44bb0fda7c91cbb266",measurementId:"G-5XJPFYLNSC"},w=(0,_.Wp)(S),D=(0,x.aU)(w);var O={data(){return{bonos:[],mostrarModalBono:!1,bonoSeleccionado:null}},mounted(){const o=(0,x.rJ)(D,"bonos");(0,x.aQ)(o,(o=>{this.bonos=o.docs.map((o=>({id:o.id,...o.data()})))}))},created(){this.bonos=this.bonos.map((o=>({...o,active:!0===o.active}))).sort(((o,e)=>e.active-o.active))},methods:{formatDate(o){const e=new Date(o);if(isNaN(e.getTime()))return"-";const a=e.getDate(),t=e.toLocaleString("es-ES",{month:"short"}),n=e.getFullYear().toString().slice(-2);return`${a}-${t}-${n}`},mostrarModal(o){this.bonoSeleccionado=o,this.mostrarModalBono=!0},cerrarModal(){this.mostrarModalBono=!1,this.bonoSeleccionado=null},verBono(o){this.$router.push({path:"/editbono",query:{bono:JSON.stringify(o),ver:!0}}),this.cerrarModal()},editarBono(o){console.log(JSON.stringify(o)),this.$router.push({path:"/editbono",query:{bono:JSON.stringify(o)}}),this.cerrarModal()},async borrarBono(o){try{await(0,x.kd)((0,x.H9)(D,"bonos",o)),console.log("Bono borrado con éxito"),this.cerrarModal()}catch(e){console.error("Error al borrar el bono: ",e)}},redirigirAEditBono(){this.$router.push("/editbono")}}};const U=(0,r.A)(O,[["render",E]]);var z=U;const N={class:"form"},V={class:"centered-title"},A={class:"mb-3"},j=["disabled"],M={class:"mb-3"},H=["disabled"],I={class:"mb-3"},J={class:"input-group"},F=["disabled"],P={class:"mb-3"},q={class:"input-group mb-3"},T=["disabled"],X=["disabled"],$={class:"mb-3"},G=["disabled"],W={class:"mb-3"},K=["disabled"],Q={class:"form-check"},R=["disabled"],Y={class:"form-check"},Z=["disabled"],oo={class:"d-grid mt-4"};function eo(o,e,a,i,r,l){return(0,n.uX)(),(0,n.CE)("div",N,[(0,n.Lk)("h1",V,(0,u.v_)(r.bonoId&&!i.ver?"Editar Bono":r.bonoId&&i.ver?"Ver Bono":"Crear Bono"),1),(0,n.Lk)("div",A,[e[12]||(e[12]=(0,n.Lk)("label",{for:"nombreBono",class:"form-label"},"Nombre",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"nombreBono","onUpdate:modelValue":e[0]||(e[0]=o=>r.nombre=o),disabled:i.ver,required:""},null,8,j),[[t.Jo,r.nombre]])]),(0,n.Lk)("div",M,[e[13]||(e[13]=(0,n.Lk)("label",{for:"descripcionBono",class:"form-label"},"Descripción",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"descripcionBono",rows:"3","onUpdate:modelValue":e[1]||(e[1]=o=>r.descripcion=o),disabled:i.ver},null,8,H),[[t.Jo,r.descripcion]])]),(0,n.Lk)("div",I,[e[15]||(e[15]=(0,n.Lk)("label",{for:"importeBono",class:"form-label"},"Importe",-1)),(0,n.Lk)("div",J,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"importeBono",placeholder:"0",min:"0",inputmode:"numeric","onUpdate:modelValue":e[2]||(e[2]=o=>r.importe=o),"aria-label":"Importe"},null,512),[[t.Jo,r.importe]]),(0,n.bo)((0,n.Lk)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[3]||(e[3]=o=>r.moneda=o),disabled:i.ver},e[14]||(e[14]=[(0,n.Lk)("option",{value:"EUR",selected:""},"EUR",-1),(0,n.Lk)("option",{value:"GBP"},"GBP",-1),(0,n.Lk)("option",{value:"USD"},"USD",-1)]),8,F),[[t.u1,r.moneda]])])]),(0,n.Lk)("div",P,[e[17]||(e[17]=(0,n.Lk)("label",{for:"Caducidad",class:"form-label"},"Caducidad",-1)),(0,n.Lk)("div",q,[(0,n.bo)((0,n.Lk)("input",{type:"number",id:"numero",class:"form-control me-5",placeholder:"1","aria-label":"Username",min:"0",inputmode:"numeric","onUpdate:modelValue":e[4]||(e[4]=o=>r.caducidadNumero=o),disabled:i.ver},null,8,T),[[t.Jo,r.caducidadNumero]]),(0,n.bo)((0,n.Lk)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[5]||(e[5]=o=>r.caducidadUnidad=o),disabled:i.ver},e[16]||(e[16]=[(0,n.Lk)("option",{value:"días"},"Día/s",-1),(0,n.Lk)("option",{value:"semanas"},"Semana/s",-1),(0,n.Lk)("option",{value:"meses"},"Mes/es",-1),(0,n.Lk)("option",{value:"años"},"Año/s",-1)]),8,X),[[t.u1,r.caducidadUnidad]])])]),(0,n.Lk)("div",$,[e[18]||(e[18]=(0,n.Lk)("label",{for:"validezDesde",class:"form-label",required:""},"Validez Desde",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control",id:"validezDesde","onUpdate:modelValue":e[6]||(e[6]=o=>r.validezDesde=o),disabled:i.ver,required:""},null,8,G),[[t.Jo,r.validezDesde]])]),(0,n.Lk)("div",W,[e[19]||(e[19]=(0,n.Lk)("label",{for:"validezHasta",class:"form-label"},"Validez Hasta",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control",id:"validezHasta","onUpdate:modelValue":e[7]||(e[7]=o=>r.validezHasta=o),disabled:i.ver},null,8,K),[[t.Jo,r.validezHasta]])]),(0,n.Lk)("div",Q,[(0,n.bo)((0,n.Lk)("input",{class:"form-check-input",type:"checkbox",id:"nominalCheck","onUpdate:modelValue":e[8]||(e[8]=o=>r.nominal=o),disabled:i.ver},null,8,R),[[t.lH,r.nominal]]),e[20]||(e[20]=(0,n.Lk)("label",{class:"form-check-label",for:"nominalCheck"}," Nominal ",-1))]),(0,n.Lk)("div",Y,[(0,n.bo)((0,n.Lk)("input",{class:"form-check-input",type:"checkbox",id:"activeCheck","onUpdate:modelValue":e[9]||(e[9]=o=>r.activo=o),disabled:i.ver},null,8,Z),[[t.lH,r.activo]]),e[21]||(e[21]=(0,n.Lk)("label",{class:"form-check-label",for:"activeCheck"}," Activo ",-1))]),(0,n.Lk)("div",oo,[i.ver?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("button",{key:0,type:"submit",class:"btn btn-primary btn-lg",onClick:e[10]||(e[10]=(...o)=>l.guardarBono&&l.guardarBono(...o))},"Guardar")),(0,n.Lk)("button",{type:"button",class:"btn btn-secondary btn-lg mt-2",onClick:e[11]||(e[11]=(...o)=>l.cancelarEdicion&&l.cancelarEdicion(...o))},(0,u.v_)(i.ver?"Cerrar":"Cancelar"),1)])])}var ao={props:{bono:{type:Object,default:null},route:{type:Object,default:null}},setup(o){const e=(0,d.rd)(),a=!!o.route.query.ver;return{router:e,ver:a}},data(){return{bonoId:this.bono?this.bono.id:null,nombre:this.bono?this.bono.name:"",descripcion:this.bono?this.bono.description:"",importe:this.bono?this.bono.amount:"",moneda:this.bono?this.bono.currency:"EUR",caducidadNumero:this.bono?this.bono.expiration_num:1,caducidadUnidad:this.bono?this.bono.expiration_units:"meses",validezDesde:this.bono?this.bono.available_from:"",validezHasta:this.bono?this.bono.available_to:"",nominal:!!this.bono&&this.bono.nominal,activo:!!this.bono&&this.bono.active}},methods:{async guardarBono(){if(this.nombre)if(this.validezDesde)try{this.bonoId?(await(0,x.mZ)((0,x.H9)(D,"bonos",this.bonoId),{name:this.nombre,description:this.descripcion,amount:this.importe,currency:this.moneda,expiration_num:this.caducidadNumero,expiration_units:this.caducidadUnidad,available_from:this.validezDesde,available_to:this.validezHasta,nominal:this.nominal,active:this.activo,last_update:(0,x.O5)()}),console.log("Bono actualizado con éxito!")):(await(0,x.gS)((0,x.rJ)(D,"bonos"),{name:this.nombre,description:this.descripcion,amount:this.importe,currency:this.moneda,expiration_num:this.caducidadNumero,expiration_units:this.caducidadUnidad,available_from:this.validezDesde,available_to:this.validezHasta,nominal:this.nominal,active:this.activo,creation_time:(0,x.O5)(),last_update:(0,x.O5)()}),console.log("Bono guardado con éxito!")),this.router.push("/bonolist")}catch(o){console.error("Error al guardar/actualizar el bono:",o)}else alert("El campo Validez Desde es obligatorio.");else alert("El campo Nombre es obligatorio.")},cancelarEdicion(){this.router.push("/bonolist")}}};const to=(0,r.A)(ao,[["render",eo]]);var no=to;const io=[{path:"/",name:"bonolist",component:z},{path:"/about",name:"about",component:()=>a.e(594).then(a.bind(a,603))},{path:"/bonolist",name:"BonoList",component:z},{path:"/editbono",component:no,props:o=>({bono:o.query.bono?JSON.parse(o.query.bono):null,route:o})}],ro=(0,d.aE)({history:(0,d.LA)("/bonosapp/bonosappvue/"),routes:io});var lo=ro,so=a(782),co=(0,so.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,t.Ef)(c).use(co).use(lo).mount("#app")}},e={};function a(t){var n=e[t];if(void 0!==n)return n.exports;var i=e[t]={exports:{}};return o[t].call(i.exports,i,i.exports,a),i.exports}a.m=o,function(){var o=[];a.O=function(e,t,n,i){if(!t){var r=1/0;for(d=0;d<o.length;d++){t=o[d][0],n=o[d][1],i=o[d][2];for(var l=!0,s=0;s<t.length;s++)(!1&i||r>=i)&&Object.keys(a.O).every((function(o){return a.O[o](t[s])}))?t.splice(s--,1):(l=!1,i<r&&(r=i));if(l){o.splice(d--,1);var c=n();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=o.length;d>0&&o[d-1][2]>i;d--)o[d]=o[d-1];o[d]=[t,n,i]}}(),function(){a.n=function(o){var e=o&&o.__esModule?function(){return o["default"]}:function(){return o};return a.d(e,{a:e}),e}}(),function(){a.d=function(o,e){for(var t in e)a.o(e,t)&&!a.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:e[t]})}}(),function(){a.f={},a.e=function(o){return Promise.all(Object.keys(a.f).reduce((function(e,t){return a.f[t](o,e),e}),[]))}}(),function(){a.u=function(o){return"js/about.14469159.js"}}(),function(){a.miniCssF=function(o){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){a.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)}}(),function(){var o={},e="bonosappvue:";a.l=function(t,n,i,r){if(o[t])o[t].push(n);else{var l,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==e+i){l=u;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",e+i),l.src=t),o[t]=[n];var b=function(e,a){l.onerror=l.onload=null,clearTimeout(m);var n=o[t];if(delete o[t],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach((function(o){return o(a)})),e)return e(a)},m=setTimeout(b.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=b.bind(null,l.onerror),l.onload=b.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){a.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}(),function(){a.p="/bonosapp/bonosappvue/"}(),function(){var o={524:0};a.f.j=function(e,t){var n=a.o(o,e)?o[e]:void 0;if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(a,t){n=o[e]=[a,t]}));t.push(n[2]=i);var r=a.p+a.u(e),l=new Error,s=function(t){if(a.o(o,e)&&(n=o[e],0!==n&&(o[e]=void 0),n)){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",l.name="ChunkLoadError",l.type=i,l.request=r,n[1](l)}};a.l(r,s,"chunk-"+e,e)}},a.O.j=function(e){return 0===o[e]};var e=function(e,t){var n,i,r=t[0],l=t[1],s=t[2],c=0;if(r.some((function(e){return 0!==o[e]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(s)var d=s(a)}for(e&&e(t);c<r.length;c++)i=r[c],a.o(o,i)&&o[i]&&o[i][0](),o[i]=0;return a.O(d)},t=self["webpackChunkbonosappvue"]=self["webpackChunkbonosappvue"]||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))}();var t=a.O(void 0,[504],(function(){return a(8079)}));t=a.O(t)})();
//# sourceMappingURL=app.6e5a46ef.js.map